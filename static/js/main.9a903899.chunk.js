(this["webpackJsonp01-firebase-react"]=this["webpackJsonp01-firebase-react"]||[]).push([[0],{33:function(e,t,a){e.exports=a(51)},42:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(19),o=a.n(s),l=a(9),c=(a(42),a(10)),i=a(29),u=a(30),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.typeof){case"REGISTER_REQUEST":return{registering:!0};case"REGISTER_SUCCESS":case"REGISTER_FAILURE":return{};default:return e}},g=localStorage.getItem("email"),d=g?{loggedIn:!0,user:g}:{},p=Object(c.c)({registrationReducer:m,authenticationReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":case"LOGIN_SUCCESS":return{loggedIn:!0,user:t.user};case"LOGIN_FAILURE":case"LOGOUT":return{};default:return e}},alertReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALERT_SUCCESS":return{type:"alert-success",message:t.message};case"ALERT_ERROR":return{type:"alert-danger",message:t.message};case"ALERT_CLEAR":return{};default:return e}}}),h=Object(u.createLogger)(),b=Object(c.d)(p,Object(c.a)(i.a,h)),E=a(12),f=a(13),v=a(16),S=a(15),R=a(3),O=a(5),y=Object(O.a)(),j=a(32),w=function(e){var t=e.component,a=Object(j.a)(e,["component"]);return console.log(localStorage.getItem("email")),n.a.createElement(R.b,Object.assign({},a,{render:function(e){return localStorage.getItem("email")?n.a.createElement(t,e):n.a.createElement(R.a,{to:"/login"})}}))},C=a(14),I=a(8),N=a(31),L=(a(49),N.initializeApp({apiKey:"AIzaSyAMtZa_T7v3ZXspkVB7bbdXzjE2ymZsZj4",authDomain:"fir-react-auth-8ee30.firebaseapp.com",databaseURL:"https://fir-react-auth-8ee30.firebaseio.com",projectId:"fir-react-auth-8ee30",storageBucket:"fir-react-auth-8ee30.appspot.com",messagingSenderId:"785008082425",appId:"1:785008082425:web:38282fc89b919dc080d128"})),A={register:function(e){return console.log(e.email),console.log(e.password),L.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(e){console.log(e)})).catch((function(e){return console.log(e),Promise.reject(e)}))},login:function(e,t){return L.auth().signInWithEmailAndPassword(e,t).then((function(e){return localStorage.setItem("email",e.user.email),e})).catch((function(e){return console.log(e),Promise.reject(e)}))},logout:function(){L.auth().signOut().then((function(){console.log("Signed out")})),localStorage.removeItem("email")}};var T={success:function(e){return{type:"ALERT_SUCCESS",message:e}},error:function(e){return{type:"ALERT_ERROR",message:e}},clear:function(){return{type:"ALERT_CLEAR"}}},_={register:function(e){return function(t){t(function(e){return{type:"REGISTER_REQUEST",user:e}}(e)),A.register(e).then((function(e){t(function(e){return{type:"REGISTER_SUCCESS",user:e}}()),y.push("/login"),t(T.success("Registration successful"))}),(function(e){console.log(e.message),t(T.error(e.message))}))}},login:function(e,t){return function(a){var r=A.login(e,t).then((function(e){console.log(e),a(function(e){return{type:"LOGIN_SUCCESS",user:e}}(e)),y.push("/")}),(function(e){a(function(e){return{type:"LOGIN_FAILURE",error:e}}(e.message)),a(T.error(e.message))}));console.log(r)}},logout:function(){return A.logout(),{type:"LOGOUT"}}};var U=function(e){Object(v.a)(a,e);var t=Object(S.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(C.a)({},a,n))},r.handleSubmit=function(e){e.preventDefault(),r.setState({submitted:!0});var t=r.state,a=t.email,n=t.password;a&&n&&r.props.login(a,n)},r.state={email:"",password:"",submitted:!1},r.props.logout(),r}return Object(f.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,r=e.submitted,s=this.props.alert;return console.log(this.props),n.a.createElement("div",{className:"shadow col-sm-6 col-lg-4 border p-5"},s.message&&n.a.createElement("div",{className:"alert ".concat(s.type)},s.message),n.a.createElement("h1",null,"Login"),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("label",{className:"d-block mb-3"},"Email",n.a.createElement("input",{type:"email",onChange:this.handleChange,value:t,name:"email",className:"form-control"+(r&&!t?" is-invalid":""),placeholder:"Enter email"}),r&&!t&&n.a.createElement("div",{className:"invalid-feedback"},"Email is required")),n.a.createElement("label",{className:"d-block mb-3"},"Password",n.a.createElement("input",{type:"password",onChange:this.handleChange,value:a,name:"password",className:"form-control"+(r&&!a?" is-invalid":""),placeholder:"Password"}),r&&!a&&n.a.createElement("div",{className:"invalid-feedback"},"Password is required")),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login"),n.a.createElement(I.a,{to:"/register",className:"btn text-primary"},"Register")))}}]),a}(r.Component),k={login:_.login,logout:_.logout},G=Object(l.b)((function(e){return{alert:e.alertReducer,loggedIn:e.authenticationReducer.loggedIn}}),k)(U),P=a(25),q=function(e){Object(v.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(E.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,r=a.name,n=a.value,s=e.state.user;e.setState({user:Object(P.a)(Object(P.a)({},s),{},Object(C.a)({},r,n))})},e.handleSubmit=function(t){t.preventDefault(),e.setState({submitted:!0});var a=e.state.user;a.email&&a.password&&e.props.register(a)},e.state={user:{email:"",password:""},submitted:!1},e}return Object(f.a)(a,[{key:"render",value:function(){console.log(this.props);var e=this.state,t=e.user,a=e.submitted,r=this.props.alert;return n.a.createElement("div",{className:"shadow col-sm-6 col-lg-4 border p-5"},r.message&&n.a.createElement("div",{className:"alert ".concat(r.type)},r.message),n.a.createElement("h1",null,"Register"),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("label",{className:"d-block mb-3"},"Email",n.a.createElement("input",{type:"email",onChange:this.handleChange,value:t.email,name:"email",className:"form-control"+(a&&!t.email?" is-invalid":""),placeholder:"Email"}),a&&!t.email&&n.a.createElement("div",null,"Email is required")),n.a.createElement("label",{className:"d-block mb-3"},"Password",n.a.createElement("input",{type:"password",onChange:this.handleChange,value:t.password,name:"password",className:"form-control"+(a&&!t.password?" is-invalid":""),placeholder:"Password"}),a&&!t.password&&n.a.createElement("div",{className:"invalid-feedback"},"Password is required")),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Register"),n.a.createElement(I.a,{to:"/login",className:"btn text-primary"},"Cancel")))}}]),a}(r.Component),x={register:_.register},F=Object(l.b)((function(e){return{alert:e.alertReducer,registering:e.registrationReducer.registering}}),x)(q);var Z=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(I.a,{className:" btn btn-primary btn-logout",to:"/login"},"Logout"),n.a.createElement("h1",null,"Welcome to Member page"))},z=function(e){Object(v.a)(a,e);var t=Object(S.a)(a);function a(e){var r;return Object(E.a)(this,a),r=t.call(this,e),y.listen((function(e,t){r.props.clearAlerts()})),r}return Object(f.a)(a,[{key:"render",value:function(){return console.log(this.props),n.a.createElement("div",{className:"d-flex justify-content-center align-items-center h-100 position-relative"},n.a.createElement(R.c,{history:y},n.a.createElement(R.d,null,n.a.createElement(w,{exact:!0,path:"/",component:Z}),n.a.createElement(R.b,{path:"/login",component:G}),n.a.createElement(R.b,{path:"/register",component:F}))))}}]),a}(r.Component),D={clearAlerts:T.clear},Q=Object(l.b)((function(e){return{alertReducer:e.alertReducer}}),D)(z);o.a.render(n.a.createElement(l.a,{store:b},n.a.createElement(Q,null)),document.querySelector("#root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.9a903899.chunk.js.map